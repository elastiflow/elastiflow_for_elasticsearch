{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"3-Layer Sankey (sessions)","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"3-Layer Sankey (sessions)\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\r\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega/v5.json\\\",\\r\\n  \\\"description\\\": \\\"Copyright (C)2023 ElastiFlow Inc.\\\",\\r\\n  \\\"autosize\\\": \\\"fit\\\",\\r\\n\\r\\n  \\\"config\\\": {\\r\\n    \\\"text\\\": {\\r\\n      \\\"fill\\\": \\\"#dddddd\\\",\\r\\n      \\\"fontSize\\\": 11\\r\\n    },\\r\\n    \\\"axis\\\": {\\r\\n      \\\"labelColor\\\": \\\"#bbbbbb\\\",\\r\\n      \\\"labelFontSize\\\": 12,\\r\\n      \\\"domain\\\": false\\r\\n    }\\r\\n  },\\r\\n\\r\\n  \\\"data\\\": [\\r\\n    {\\r\\n      \\\"name\\\": \\\"rawData\\\",\\r\\n      \\\"url\\\": {\\r\\n        \\\"%context%\\\": true,\\r\\n        \\\"%timefield%\\\": \\\"@timestamp\\\",\\r\\n        \\\"index\\\": \\\"elastiflow-flow-codex-*\\\",\\r\\n        \\\"body\\\": {\\r\\n          \\\"size\\\": 0,\\r\\n          \\\"aggs\\\": {\\r\\n            \\\"table\\\": {\\r\\n              \\\"composite\\\": {\\r\\n                \\\"size\\\": 10000,\\r\\n                \\\"sources\\\": [\\r\\n                  {\\r\\n                    \\\"stk1\\\": {\\r\\n                      \\\"terms\\\": {\\r\\n                        \\\"field\\\": \\\"flow.client.host.name\\\"\\r\\n                      }\\r\\n                    }\\r\\n                  },\\r\\n                  {\\r\\n                    \\\"stk2\\\": {\\r\\n                      \\\"terms\\\": {\\r\\n                        \\\"field\\\": \\\"flow.server.l4.port.name\\\"\\r\\n                      }\\r\\n                    }\\r\\n                  },\\r\\n                  {\\r\\n                    \\\"stk3\\\": {\\r\\n                      \\\"terms\\\": {\\r\\n                        \\\"field\\\": \\\"flow.server.host.name\\\"\\r\\n                      }\\r\\n                    }\\r\\n                  }\\r\\n                ]\\r\\n              },\\r\\n        \\t\\t\\t\\\"aggs\\\": {\\r\\n        \\t\\t\\t\\t\\\"sessions\\\": {\\r\\n        \\t\\t\\t\\t\\t\\\"cardinality\\\": {\\r\\n        \\t\\t\\t\\t\\t\\t\\\"field\\\": \\\"flow.community.id\\\"\\r\\n        \\t\\t\\t\\t\\t}\\r\\n        \\t\\t\\t\\t}\\r\\n        \\t\\t\\t}\\r\\n            }\\r\\n          }\\r\\n        }\\r\\n      },\\r\\n      \\\"format\\\": {\\r\\n        \\\"property\\\": \\\"aggregations.table.buckets\\\"\\r\\n      },\\r\\n      \\\"transform\\\": [\\r\\n        {\\r\\n          \\\"type\\\": \\\"formula\\\",\\r\\n          \\\"expr\\\": \\\"datum.key.stk1\\\",\\r\\n          \\\"as\\\": \\\"stk1\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"formula\\\",\\r\\n          \\\"expr\\\": \\\"datum.key.stk2\\\",\\r\\n          \\\"as\\\": \\\"stk2\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"formula\\\",\\r\\n          \\\"expr\\\": \\\"datum.key.stk3\\\",\\r\\n          \\\"as\\\": \\\"stk3\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"formula\\\",\\r\\n          \\\"expr\\\": \\\"datum.sessions.value\\\",\\r\\n          \\\"as\\\": \\\"size\\\"\\r\\n        }\\r\\n      ]\\r\\n    },\\r\\n    {\\r\\n      \\\"name\\\": \\\"nodes\\\",\\r\\n      \\\"source\\\": \\\"rawData\\\",\\r\\n      \\\"transform\\\": [\\r\\n        {\\r\\n          \\\"type\\\": \\\"filter\\\",\\r\\n          \\\"expr\\\": \\\"!groupSelector || groupSelector.stk1 == datum.stk1 || groupSelector.stk2 == datum.stk2 || groupSelector.stk3 == datum.stk3\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"formula\\\",\\r\\n          \\\"expr\\\": \\\"'key1__'+datum.stk1+'__'+datum.stk2+'__'+datum.stk3\\\",\\r\\n          \\\"as\\\": \\\"key\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"fold\\\",\\r\\n          \\\"fields\\\": [\\\"stk1\\\", \\\"stk2\\\", \\\"stk3\\\"],\\r\\n          \\\"as\\\": [\\\"stack\\\", \\\"grpId\\\"]\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"stack\\\",\\r\\n          \\\"groupby\\\": [\\\"stack\\\"],\\r\\n          \\\"sort\\\": {\\r\\n            \\\"field\\\": \\\"grpId\\\",\\r\\n            \\\"order\\\": \\\"descending\\\"\\r\\n          },\\r\\n          \\\"field\\\": \\\"size\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"formula\\\",\\r\\n          \\\"expr\\\": \\\"(datum.y0+datum.y1)/2\\\",\\r\\n          \\\"as\\\": \\\"yc\\\"\\r\\n        }\\r\\n      ]\\r\\n    },\\r\\n    {\\r\\n      \\\"name\\\": \\\"groups\\\",\\r\\n      \\\"source\\\": \\\"nodes\\\",\\r\\n      \\\"transform\\\": [\\r\\n        {\\r\\n          \\\"type\\\": \\\"aggregate\\\",\\r\\n          \\\"groupby\\\": [\\\"stack\\\", \\\"grpId\\\"],\\r\\n          \\\"fields\\\": [\\\"size\\\"],\\r\\n          \\\"ops\\\": [\\\"sum\\\"],\\r\\n          \\\"as\\\": [\\\"total\\\"]\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"stack\\\",\\r\\n          \\\"groupby\\\": [\\\"stack\\\"],\\r\\n          \\\"sort\\\": {\\r\\n            \\\"field\\\": \\\"grpId\\\",\\r\\n            \\\"order\\\": \\\"descending\\\"\\r\\n          },\\r\\n          \\\"field\\\": \\\"total\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"formula\\\",\\r\\n          \\\"expr\\\": \\\"scale('y', datum.y0)\\\",\\r\\n          \\\"as\\\": \\\"scaledY0\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"formula\\\",\\r\\n          \\\"expr\\\": \\\"scale('y', datum.y1)\\\",\\r\\n          \\\"as\\\": \\\"scaledY1\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"formula\\\",\\r\\n          \\\"expr\\\": \\\"datum.stack == 'stk1'\\\",\\r\\n          \\\"as\\\": \\\"rightLabel\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"formula\\\",\\r\\n          \\\"expr\\\": \\\"datum.total/domain('y')[1]\\\",\\r\\n          \\\"as\\\": \\\"percentage\\\"\\r\\n        }\\r\\n      ]\\r\\n    },\\r\\n    {\\r\\n      \\\"name\\\": \\\"stackedNodes1\\\",\\r\\n      \\\"source\\\": \\\"nodes\\\",\\r\\n      \\\"transform\\\": [\\r\\n        {\\r\\n          \\\"type\\\": \\\"filter\\\",\\r\\n          \\\"expr\\\": \\\"datum.stack == 'stk1'\\\"\\r\\n        }\\r\\n      ]\\r\\n    },\\r\\n    {\\r\\n      \\\"name\\\": \\\"stackedNodes2\\\",\\r\\n      \\\"source\\\": \\\"nodes\\\",\\r\\n      \\\"transform\\\": [\\r\\n        {\\r\\n          \\\"type\\\": \\\"filter\\\",\\r\\n          \\\"expr\\\": \\\"datum.stack == 'stk2'\\\"\\r\\n        }\\r\\n      ]\\r\\n    },\\r\\n    {\\r\\n      \\\"name\\\": \\\"stackedNodes3\\\",\\r\\n      \\\"source\\\": \\\"nodes\\\",\\r\\n      \\\"transform\\\": [\\r\\n        {\\r\\n          \\\"type\\\": \\\"filter\\\",\\r\\n          \\\"expr\\\": \\\"datum.stack == 'stk3'\\\"\\r\\n        }\\r\\n      ]\\r\\n    },\\r\\n    {\\r\\n      \\\"name\\\": \\\"edges1to2\\\",\\r\\n      \\\"source\\\": \\\"stackedNodes1\\\",\\r\\n      \\\"transform\\\": [\\r\\n        {\\r\\n          \\\"type\\\": \\\"lookup\\\",\\r\\n          \\\"from\\\": \\\"stackedNodes2\\\",\\r\\n          \\\"key\\\": \\\"key\\\",\\r\\n          \\\"fields\\\": [\\\"key\\\"],\\r\\n          \\\"as\\\": [\\\"target\\\"]\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"linkpath\\\",\\r\\n          \\\"orient\\\": \\\"horizontal\\\",\\r\\n          \\\"shape\\\": \\\"diagonal\\\",\\r\\n          \\\"sourceY\\\": {\\r\\n            \\\"expr\\\": \\\"scale('y', datum.yc)\\\"\\r\\n          },\\r\\n          \\\"sourceX\\\": {\\r\\n            \\\"expr\\\": \\\"scale('x', 'stk1') + bandwidth('x')\\\"\\r\\n          },\\r\\n          \\\"targetY\\\": {\\r\\n            \\\"expr\\\": \\\"scale('y', datum.target.yc)\\\"\\r\\n          },\\r\\n          \\\"targetX\\\": {\\r\\n            \\\"expr\\\": \\\"scale('x', 'stk2')\\\"\\r\\n          }\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"formula\\\",\\r\\n          \\\"expr\\\": \\\"range('y')[0]-scale('y', datum.size)\\\",\\r\\n          \\\"as\\\": \\\"strokeWidth\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"formula\\\",\\r\\n          \\\"expr\\\": \\\"datum.size/domain('y')[1]\\\",\\r\\n          \\\"as\\\": \\\"percentage\\\"\\r\\n        }\\r\\n      ]\\r\\n    },\\r\\n    {\\r\\n      \\\"name\\\": \\\"edges2to3\\\",\\r\\n      \\\"source\\\": \\\"stackedNodes2\\\",\\r\\n      \\\"transform\\\": [\\r\\n        {\\r\\n          \\\"type\\\": \\\"lookup\\\",\\r\\n          \\\"from\\\": \\\"stackedNodes3\\\",\\r\\n          \\\"key\\\": \\\"key\\\",\\r\\n          \\\"fields\\\": [\\\"key\\\"],\\r\\n          \\\"as\\\": [\\\"target\\\"]\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"linkpath\\\",\\r\\n          \\\"orient\\\": \\\"horizontal\\\",\\r\\n          \\\"shape\\\": \\\"diagonal\\\",\\r\\n          \\\"sourceY\\\": {\\r\\n            \\\"expr\\\": \\\"scale('y', datum.yc)\\\"\\r\\n          },\\r\\n          \\\"sourceX\\\": {\\r\\n            \\\"expr\\\": \\\"scale('x', 'stk2') + bandwidth('x')\\\"\\r\\n          },\\r\\n          \\\"targetY\\\": {\\r\\n            \\\"expr\\\": \\\"scale('y', datum.target.yc)\\\"\\r\\n          },\\r\\n          \\\"targetX\\\": {\\r\\n            \\\"expr\\\": \\\"scale('x', 'stk3')\\\"\\r\\n          }\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"formula\\\",\\r\\n          \\\"expr\\\": \\\"range('y')[0]-scale('y', datum.size)\\\",\\r\\n          \\\"as\\\": \\\"strokeWidth\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"type\\\": \\\"formula\\\",\\r\\n          \\\"expr\\\": \\\"datum.size/domain('y')[1]\\\",\\r\\n          \\\"as\\\": \\\"percentage\\\"\\r\\n        }\\r\\n      ]\\r\\n    }\\r\\n  ],\\r\\n\\r\\n  \\\"scales\\\": [\\r\\n    {\\r\\n      \\\"name\\\": \\\"x\\\",\\r\\n      \\\"type\\\": \\\"band\\\",\\r\\n      \\\"range\\\": \\\"width\\\",\\r\\n      \\\"domain\\\": [\\\"stk1\\\", \\\"stk2\\\", \\\"stk3\\\"],\\r\\n      \\\"paddingOuter\\\": 0.05,\\r\\n      \\\"paddingInner\\\": 0.95\\r\\n    },\\r\\n    {\\r\\n      \\\"name\\\": \\\"y\\\",\\r\\n      \\\"type\\\": \\\"linear\\\",\\r\\n      \\\"range\\\": \\\"height\\\",\\r\\n      \\\"domain\\\": {\\r\\n        \\\"data\\\": \\\"nodes\\\",\\r\\n        \\\"field\\\": \\\"y1\\\"\\r\\n      }\\r\\n    },\\r\\n    {\\r\\n      \\\"name\\\": \\\"color\\\",\\r\\n      \\\"type\\\": \\\"ordinal\\\",\\r\\n      \\\"range\\\": \\\"category\\\",\\r\\n      \\\"domain\\\": {\\r\\n        \\\"data\\\": \\\"rawData\\\",\\r\\n        \\\"fields\\\": [\\\"stk1\\\", \\\"stk2\\\", \\\"stk3\\\"]\\r\\n      }\\r\\n    },\\r\\n    {\\r\\n      \\\"name\\\": \\\"stackNames\\\",\\r\\n      \\\"type\\\": \\\"ordinal\\\",\\r\\n      \\\"range\\\": [\\\"Client\\\", \\\"Service\\\", \\\"Server\\\"],\\r\\n      \\\"domain\\\": [\\\"stk1\\\", \\\"stk2\\\", \\\"stk3\\\"]\\r\\n    }\\r\\n  ],\\r\\n\\r\\n  \\\"axes\\\": [\\r\\n    {\\r\\n      \\\"orient\\\": \\\"bottom\\\",\\r\\n      \\\"scale\\\": \\\"x\\\",\\r\\n      \\\"encode\\\": {\\r\\n        \\\"labels\\\": {\\r\\n          \\\"update\\\": {\\r\\n            \\\"text\\\": {\\r\\n              \\\"scale\\\": \\\"stackNames\\\",\\r\\n              \\\"field\\\": \\\"value\\\"\\r\\n            },\\r\\n            \\\"fontSize\\\": {\\\"value\\\": 12}\\r\\n          }\\r\\n        }\\r\\n      }\\r\\n    },\\r\\n    {\\r\\n      \\\"orient\\\": \\\"left\\\",\\r\\n      \\\"scale\\\": \\\"y\\\",\\r\\n      \\\"encode\\\": {\\r\\n        \\\"labels\\\": {\\r\\n          \\\"update\\\": {\\r\\n            \\\"text\\\": {\\\"signal\\\": \\\"format(datum.value, '.2s')\\\"},\\r\\n            \\\"fontSize\\\": {\\\"value\\\": 12}\\r\\n          }\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n  ],\\r\\n\\r\\n  \\\"marks\\\": [\\r\\n    {\\r\\n      \\\"type\\\": \\\"path\\\",\\r\\n      \\\"name\\\": \\\"edgeMarks1to2\\\",\\r\\n      \\\"from\\\": {\\r\\n        \\\"data\\\": \\\"edges1to2\\\"\\r\\n      },\\r\\n      \\\"clip\\\": true,\\r\\n      \\\"encode\\\": {\\r\\n        \\\"update\\\": {\\r\\n          \\\"stroke\\\": [\\r\\n            {\\r\\n              \\\"test\\\": \\\"groupSelector && groupSelector.stack=='stk1'\\\",\\r\\n              \\\"scale\\\": \\\"color\\\",\\r\\n              \\\"field\\\": \\\"stk3\\\"\\r\\n            },\\r\\n            {\\r\\n              \\\"test\\\": \\\"groupSelector && (groupSelector.stack=='stk2' || groupSelector.stack=='stk3')\\\",\\r\\n              \\\"scale\\\": \\\"color\\\",\\r\\n              \\\"field\\\": \\\"stk1\\\"\\r\\n            },\\r\\n            {\\r\\n              \\\"scale\\\": \\\"color\\\",\\r\\n              \\\"field\\\": \\\"stk1\\\"\\r\\n            }\\r\\n          ],\\r\\n          \\\"strokeWidth\\\": {\\r\\n            \\\"field\\\": \\\"strokeWidth\\\"\\r\\n          },\\r\\n          \\\"path\\\": {\\r\\n            \\\"field\\\": \\\"path\\\"\\r\\n          },\\r\\n          \\\"strokeOpacity\\\": {\\r\\n            \\\"signal\\\": \\\"groupHover.stk1 == datum.stk1 || groupHover.stk2 == datum.stk2 || groupHover.stk3 == datum.stk3 ? 0.9 : 0.3\\\"\\r\\n          },\\r\\n          \\\"zindex\\\": {\\r\\n            \\\"signal\\\": \\\"!groupSelector && (groupHover.stk1 == datum.stk1 || groupHover.stk2 == datum.stk2 || groupHover.stk3 == datum.stk3) ? 1 : 0\\\"\\r\\n          },\\r\\n          \\\"tooltip\\\": {\\r\\n            \\\"signal\\\": \\\"datum.stk1 + ' → ' + datum.stk2 + '    ' + format(datum.size, '.2s') + ' packets (' + format(datum.percentage, '.1%') + ')'\\\"\\r\\n          }\\r\\n        },\\r\\n        \\\"hover\\\": {\\r\\n          \\\"strokeOpacity\\\": {\\r\\n            \\\"value\\\": 1\\r\\n          }\\r\\n        }\\r\\n      }\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"path\\\",\\r\\n      \\\"name\\\": \\\"edgeMarks2to3\\\",\\r\\n      \\\"from\\\": {\\r\\n        \\\"data\\\": \\\"edges2to3\\\"\\r\\n      },\\r\\n      \\\"clip\\\": true,\\r\\n      \\\"encode\\\": {\\r\\n        \\\"update\\\": {\\r\\n          \\\"stroke\\\": [\\r\\n            {\\r\\n              \\\"test\\\": \\\"groupSelector && groupSelector.stack=='stk1'\\\",\\r\\n              \\\"scale\\\": \\\"color\\\",\\r\\n              \\\"field\\\": \\\"stk3\\\"\\r\\n            },\\r\\n            {\\r\\n              \\\"test\\\": \\\"groupSelector && (groupSelector.stack=='stk2' || groupSelector.stack=='stk3')\\\",\\r\\n              \\\"scale\\\": \\\"color\\\",\\r\\n              \\\"field\\\": \\\"stk1\\\"\\r\\n            },\\r\\n            {\\r\\n              \\\"scale\\\": \\\"color\\\",\\r\\n              \\\"field\\\": \\\"stk2\\\"\\r\\n            }\\r\\n          ],\\r\\n          \\\"strokeWidth\\\": {\\r\\n            \\\"field\\\": \\\"strokeWidth\\\"\\r\\n          },\\r\\n          \\\"path\\\": {\\r\\n            \\\"field\\\": \\\"path\\\"\\r\\n          },\\r\\n          \\\"strokeOpacity\\\": {\\r\\n            \\\"signal\\\": \\\"groupHover.stk1 == datum.stk1 || groupHover.stk2 == datum.stk2 || groupHover.stk3 == datum.stk3 ? 0.9 : 0.3\\\"\\r\\n          },\\r\\n          \\\"zindex\\\": {\\r\\n            \\\"signal\\\": \\\"!groupSelector && (groupHover.stk1 == datum.stk1 || groupHover.stk2 == datum.stk2 || groupHover.stk3 == datum.stk3) ? 1 : 0\\\"\\r\\n          },\\r\\n          \\\"tooltip\\\": {\\r\\n            \\\"signal\\\": \\\"datum.stk2 + ' → ' + datum.stk3 + '    ' + format(datum.size, '.2s') + ' packets (' + format(datum.percentage, '.1%') + ')'\\\"\\r\\n          }\\r\\n        },\\r\\n        \\\"hover\\\": {\\r\\n          \\\"strokeOpacity\\\": {\\r\\n            \\\"value\\\": 1\\r\\n          }\\r\\n        }\\r\\n      }\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"rect\\\",\\r\\n      \\\"name\\\": \\\"groupMark\\\",\\r\\n      \\\"from\\\": {\\r\\n        \\\"data\\\": \\\"groups\\\"\\r\\n      },\\r\\n      \\\"encode\\\": {\\r\\n        \\\"enter\\\": {\\r\\n          \\\"fill\\\": {\\r\\n            \\\"scale\\\": \\\"color\\\",\\r\\n            \\\"field\\\": \\\"grpId\\\"\\r\\n          },\\r\\n          \\\"width\\\": {\\r\\n            \\\"scale\\\": \\\"x\\\",\\r\\n            \\\"band\\\": 1\\r\\n          }\\r\\n        },\\r\\n        \\\"update\\\": {\\r\\n          \\\"x\\\": {\\r\\n            \\\"scale\\\": \\\"x\\\",\\r\\n            \\\"field\\\": \\\"stack\\\"\\r\\n          },\\r\\n          \\\"y\\\": {\\r\\n            \\\"field\\\": \\\"scaledY0\\\"\\r\\n          },\\r\\n          \\\"y2\\\": {\\r\\n            \\\"field\\\": \\\"scaledY1\\\"\\r\\n          },\\r\\n          \\\"fillOpacity\\\": {\\r\\n            \\\"value\\\": 0.6\\r\\n          },\\r\\n          \\\"tooltip\\\": {\\r\\n            \\\"signal\\\": \\\"datum.grpId + '    ' + format(datum.total, '.2s') + ' packets (' + format(datum.percentage, '.1%') + ')'\\\"\\r\\n          }\\r\\n        },\\r\\n        \\\"hover\\\": {\\r\\n          \\\"fillOpacity\\\": {\\r\\n            \\\"value\\\": 1\\r\\n          }\\r\\n        }\\r\\n      }\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"text\\\",\\r\\n      \\\"from\\\": {\\r\\n        \\\"data\\\": \\\"groups\\\"\\r\\n      },\\r\\n      \\\"interactive\\\": false,\\r\\n      \\\"encode\\\": {\\r\\n        \\\"update\\\": {\\r\\n          \\\"x\\\": {\\r\\n            \\\"signal\\\": \\\"scale('x', datum.stack) + (datum.rightLabel ? bandwidth('x') + 8 : -8)\\\"\\r\\n          },\\r\\n          \\\"yc\\\": {\\r\\n            \\\"signal\\\": \\\"(datum.scaledY0 + datum.scaledY1)/2\\\"\\r\\n          },\\r\\n          \\\"align\\\": {\\r\\n            \\\"signal\\\": \\\"datum.rightLabel ? 'left' : 'right'\\\"\\r\\n          },\\r\\n          \\\"baseline\\\": {\\r\\n            \\\"value\\\": \\\"middle\\\"\\r\\n          },\\r\\n          \\\"fontWeight\\\": {\\r\\n            \\\"value\\\": \\\"bold\\\"\\r\\n          },\\r\\n          \\\"fill\\\": {\\r\\n            \\\"value\\\": \\\"#cccccc\\\"\\r\\n          },\\r\\n          \\\"text\\\": {\\r\\n            \\\"signal\\\": \\\"abs(datum.scaledY0-datum.scaledY1) > 11 ? datum.grpId : ''\\\"\\r\\n          }\\r\\n        }\\r\\n      }\\r\\n    },\\r\\n    {\\r\\n      \\\"type\\\": \\\"group\\\",\\r\\n      \\\"data\\\": [\\r\\n        {\\r\\n          \\\"name\\\": \\\"dataForShowAll\\\",\\r\\n          \\\"values\\\": [{}],\\r\\n          \\\"transform\\\": [\\r\\n            {\\r\\n              \\\"type\\\": \\\"filter\\\",\\r\\n              \\\"expr\\\": \\\"groupSelector\\\"\\r\\n            }\\r\\n          ]\\r\\n        }\\r\\n      ],\\r\\n      \\\"encode\\\": {\\r\\n        \\\"enter\\\": {\\r\\n          \\\"xc\\\": {\\r\\n            \\\"signal\\\": \\\"width/2\\\"\\r\\n          },\\r\\n          \\\"y\\\": {\\r\\n            \\\"value\\\": 30\\r\\n          },\\r\\n          \\\"width\\\": {\\r\\n            \\\"value\\\": 80\\r\\n          },\\r\\n          \\\"height\\\": {\\r\\n            \\\"value\\\": 30\\r\\n          }\\r\\n        }\\r\\n      },\\r\\n      \\\"marks\\\": [\\r\\n        {\\r\\n          \\\"type\\\": \\\"group\\\",\\r\\n          \\\"name\\\": \\\"groupReset\\\",\\r\\n          \\\"from\\\": {\\r\\n            \\\"data\\\": \\\"dataForShowAll\\\"\\r\\n          },\\r\\n          \\\"encode\\\": {\\r\\n            \\\"enter\\\": {\\r\\n              \\\"cornerRadius\\\": {\\r\\n                \\\"value\\\": 6\\r\\n              },\\r\\n              \\\"fill\\\": {\\r\\n                \\\"value\\\": \\\"#F5F7FA\\\"\\r\\n              },\\r\\n              \\\"stroke\\\": {\\r\\n                \\\"value\\\": \\\"#c1c1c1\\\"\\r\\n              },\\r\\n              \\\"strokeWidth\\\": {\\r\\n                \\\"value\\\": 2\\r\\n              },\\r\\n              \\\"height\\\": {\\r\\n                \\\"field\\\": {\\r\\n                  \\\"group\\\": \\\"height\\\"\\r\\n                }\\r\\n              },\\r\\n              \\\"width\\\": {\\r\\n                \\\"field\\\": {\\r\\n                  \\\"group\\\": \\\"width\\\"\\r\\n                }\\r\\n              }\\r\\n            },\\r\\n            \\\"update\\\": {\\r\\n              \\\"opacity\\\": {\\r\\n                \\\"value\\\": 1\\r\\n              }\\r\\n            },\\r\\n            \\\"hover\\\": {\\r\\n              \\\"opacity\\\": {\\r\\n                \\\"value\\\": 0.7\\r\\n              }\\r\\n            }\\r\\n          },\\r\\n          \\\"marks\\\": [\\r\\n            {\\r\\n              \\\"type\\\": \\\"text\\\",\\r\\n              \\\"interactive\\\": false,\\r\\n              \\\"encode\\\": {\\r\\n                \\\"enter\\\": {\\r\\n                  \\\"xc\\\": {\\r\\n                    \\\"field\\\": {\\r\\n                      \\\"group\\\": \\\"width\\\"\\r\\n                    },\\r\\n                    \\\"mult\\\": 0.5\\r\\n                  },\\r\\n                  \\\"yc\\\": {\\r\\n                    \\\"field\\\": {\\r\\n                      \\\"group\\\": \\\"height\\\"\\r\\n                    },\\r\\n                    \\\"mult\\\": 0.5,\\r\\n                    \\\"offset\\\": 2\\r\\n                  },\\r\\n                  \\\"align\\\": {\\r\\n                    \\\"value\\\": \\\"center\\\"\\r\\n                  },\\r\\n                  \\\"baseline\\\": {\\r\\n                    \\\"value\\\": \\\"middle\\\"\\r\\n                  },\\r\\n                  \\\"fontWeight\\\": {\\r\\n                    \\\"value\\\": \\\"bold\\\"\\r\\n                  },\\r\\n                  \\\"text\\\": {\\r\\n                    \\\"value\\\": \\\"Show All\\\"\\r\\n                  }\\r\\n                }\\r\\n              }\\r\\n            }\\r\\n          ]\\r\\n        }\\r\\n      ]\\r\\n    }\\r\\n  ],\\r\\n\\r\\n  \\\"signals\\\": [\\r\\n    {\\r\\n      \\\"name\\\": \\\"groupHover\\\",\\r\\n      \\\"value\\\": {},\\r\\n      \\\"on\\\": [\\r\\n        {\\r\\n          \\\"events\\\": \\\"@groupMark:mouseover\\\",\\r\\n          \\\"update\\\": \\\"{stk1:datum.stack=='stk1' && datum.grpId, stk2:datum.stack=='stk2' && datum.grpId, stk3: datum.stack == 'stk3' && datum.grpId}\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"events\\\": \\\"mouseout\\\",\\r\\n          \\\"update\\\": \\\"{}\\\"\\r\\n        }\\r\\n      ]\\r\\n    },\\r\\n    {\\r\\n      \\\"name\\\": \\\"groupSelector\\\",\\r\\n      \\\"value\\\": false,\\r\\n      \\\"on\\\": [\\r\\n        {\\r\\n          \\\"events\\\": \\\"@groupMark:click!\\\",\\r\\n          \\\"update\\\": \\\"{stack:datum.stack, stk1:datum.stack=='stk1' && datum.grpId, stk2:datum.stack=='stk2' && datum.grpId, stk3: datum.stack == 'stk3' && datum.grpId}\\\"\\r\\n        },\\r\\n        {\\r\\n          \\\"events\\\": [\\r\\n            {\\r\\n              \\\"type\\\": \\\"click\\\",\\r\\n              \\\"markname\\\": \\\"groupReset\\\"\\r\\n            },\\r\\n            {\\r\\n              \\\"type\\\": \\\"dblclick\\\"\\r\\n            }\\r\\n          ],\\r\\n          \\\"update\\\": \\\"false\\\"\\r\\n        }\\r\\n      ]\\r\\n    }\\r\\n  ]\\r\\n}\"}}"},"coreMigrationVersion":"8.8.0","created_at":"2023-10-15T00:53:31.603Z","id":"42d7ba30-6af5-11ee-9074-230156daccf3","managed":false,"references":[],"type":"visualization","typeMigrationVersion":"8.5.0","updated_at":"2024-08-21T11:33:12.005Z","version":"WzIzOTQ5MCwzN10="}
{"excludedObjects":[],"excludedObjectsCount":0,"exportedCount":1,"missingRefCount":0,"missingReferences":[]}